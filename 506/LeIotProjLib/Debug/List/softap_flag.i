#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\softap_flag.c"
#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\flash.h"



#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\schema_task.h"



#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\LeIotProjLib\\..\\iot_sdk\\include\\datatype.h"














typedef unsigned char           UINT8;
typedef char                    INT8;
typedef unsigned short int      UINT16;
typedef short int               INT16;
typedef unsigned int            UINT32;
typedef int                     INT32;
typedef unsigned long long      UINT64;
typedef long long               INT64;


#line 44 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\LeIotProjLib\\..\\iot_sdk\\include\\datatype.h"









typedef enum {
    RELEASE_LEVEL_DEV,  
    RELEASE_LEVEL_PVT,  
    RELEASE_LEVEL_DEM,  
    RELEASE_LEVEL_API   
}eRelLevel;

#line 5 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\schema_task.h"
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"
 
 




  #pragma system_include


#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"
 
 

 


  #pragma system_include







 























 






#line 67 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"











 

#line 99 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"









#line 11 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"
 
 





  #pragma system_include


#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"
 
 

 


  #pragma system_include







 























 






#line 67 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"

#line 12 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 









  


                 




















 


   
#line 59 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"





#line 70 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"



























 





  #pragma system_include


 
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\INC\\c\\DLib_Config_Normal.h"
 
 





  #pragma system_include


 

#line 40 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"
   
#line 47 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"

 
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Product.h"




   #pragma system_include







 




 


 



 



 


 




 
#line 45 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Product.h"

 


 


 






 




 


 


 
#line 99 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Product.h"







#line 51 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"











 












 
























 













 























































































































 






 














 
























 


















 
















 








 















 

#line 351 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"













 













 












 














 












 












 












 












 

















 

















 






















 















 








 














 

#line 566 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"












 












 












 












 












 












 












 












 












 










 







 












 







 








 



















































 
















 




#line 812 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"





 

#line 826 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"


   
#line 836 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"

#line 844 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"
  







 









 








 







 






 

#line 899 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"




 







 






 















 

   
#line 943 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"









 

  #pragma language = save 
  #pragma language = extended





  #pragma language = restore










 








 







 
#line 997 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Defaults.h"





 







#line 73 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"











                 




















 
#line 147 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"





                 


 




 
 
#line 170 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

 




 






 






 
#line 233 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"











                 
#line 292 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"









#line 308 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"








#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\xencoding_limits.h"
 
 





  #pragma system_include


#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"
 
 

 


  #pragma system_include







 























 






#line 67 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"

#line 12 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\xencoding_limits.h"
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"
 
 

#line 707 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"




 
#line 13 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\xencoding_limits.h"

                                 


#line 24 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\xencoding_limits.h"




#line 42 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\xencoding_limits.h"

                                 














#line 317 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"



                 

                 
#line 335 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 
#line 360 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 
                 




#line 382 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"


                 

                                 







  #pragma language=save
  #pragma language=extended
  typedef long long _Longlong;
  typedef unsigned long long _ULonglong;
  #pragma language=restore
#line 405 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"






  typedef unsigned short int _Wchart;
  typedef unsigned short int _Wintt;


#line 424 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

#line 432 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 


typedef signed int  _Ptrdifft;
typedef unsigned int     _Sizet;

 


                 
#line 454 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"
  typedef _VA_LIST __Va_list;



__intrinsic __nounwind void __iar_Atexit(void (*)(void));



  typedef struct
  {        
    unsigned int _Wchar;
    unsigned int _State;
  } _Mbstatet;
#line 477 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"










typedef struct
{        

  _Longlong _Off;     



  _Mbstatet _Wstate;
} _Fpost;







                 

#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"













 





  #pragma system_include






 






















































































 

 



#line 157 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"

  
 

   





  


#line 176 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"





#line 187 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"





  #pragma language=save 
  #pragma language=extended
  __intrinsic __nounwind void __iar_dlib_perthread_initialize(void  *);
  __intrinsic __nounwind void  *__iar_dlib_perthread_allocate(void);
  __intrinsic __nounwind void __iar_dlib_perthread_destroy(void);
  __intrinsic __nounwind void __iar_dlib_perthread_deallocate(void  *);









  #pragma segment = "__DLIB_PERTHREAD" 
  #pragma segment = "__DLIB_PERTHREAD_init" 


























#line 242 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"

   
  void  *__iar_dlib_perthread_access(void  *);
  #pragma language=restore



























     
  









   






  





  
  typedef void *__iar_Rmtx;
  

  
  __intrinsic __nounwind void __iar_system_Mtxinit(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_system_Mtxdst(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_system_Mtxlock(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_system_Mtxunlock(__iar_Rmtx *m);

  __intrinsic __nounwind void __iar_file_Mtxinit(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_file_Mtxdst(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_file_Mtxlock(__iar_Rmtx *m);
  __intrinsic __nounwind void __iar_file_Mtxunlock(__iar_Rmtx *m);

  
 
  __intrinsic __nounwind void __iar_clearlocks(void);


#line 323 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"

  





  

#line 341 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\DLib_Threads.h"

  typedef unsigned _Once_t;



  













#line 506 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

#line 516 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 
#line 524 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"


                 

  
  
    
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock_Locale(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock_Malloc(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock_Stream(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock_Debug(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock_StaticGuard(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Locksyslock(unsigned int);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock_Locale(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock_Malloc(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock_Stream(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock_Debug(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock_StaticGuard(void);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlocksyslock(unsigned int);

  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Initdynamicfilelock(__iar_Rmtx *);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Dstdynamicfilelock(__iar_Rmtx *);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Lockdynamicfilelock(__iar_Rmtx *);
  _Pragma("object_attribute = __weak") __intrinsic __nounwind void __iar_Unlockdynamicfilelock(__iar_Rmtx *);
  
  
#line 564 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 
#line 572 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

#line 690 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"

                 





#line 705 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\yvals.h"






 
#line 12 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"
#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ysizet.h"
 
 





  #pragma system_include


#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"
 
 

 


  #pragma system_include







 























 






#line 67 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ycheck.h"

#line 12 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\ysizet.h"



                 




typedef _Sizet size_t;




typedef unsigned int __data_size_t;











#line 13 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"



#line 32 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"







    typedef unsigned int __time32_t;
    typedef unsigned int clock_t;







  #pragma language=save
  #pragma language=extended
  typedef signed long long __time64_t;
  #pragma language=restore


#line 64 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"




  typedef __time32_t time_t;


struct tm
{        
  int tm_sec;
  int tm_min;
  int tm_hour;
  int tm_mday;
  int tm_mon;
  int tm_year;
  int tm_wday;
  int tm_yday;
  int tm_isdst;

  int __BSD_bug_filler1;
  int __BSD_bug_filler2;

};






        
__intrinsic __nounwind time_t time(time_t *);
__intrinsic __nounwind __time32_t __time32(__time32_t *);

  __intrinsic __nounwind __time64_t __time64(__time64_t *);



      
__intrinsic __nounwind char * asctime(const struct tm *);
__intrinsic __nounwind clock_t clock(void);
__intrinsic __nounwind char * ctime(const time_t *);
_Pragma("function_effects = no_state, no_errno") __intrinsic __nounwind double difftime(time_t, time_t);
__intrinsic __nounwind struct tm * gmtime(const time_t *);
__intrinsic __nounwind struct tm * localtime(const time_t *);
__intrinsic __nounwind time_t mktime(struct tm *);



__intrinsic __nounwind char * __ctime32(const __time32_t *);
_Pragma("function_effects = no_state, no_errno") __intrinsic __nounwind double __difftime32(__time32_t, __time32_t);
__intrinsic __nounwind struct tm * __gmtime32(const __time32_t *);
__intrinsic __nounwind struct tm * __localtime32(const __time32_t *);
__intrinsic __nounwind __time32_t __mktime32(struct tm *);

  __intrinsic __nounwind char * __ctime64(const __time64_t *);
  _Pragma("function_effects = no_state, no_errno") __intrinsic __nounwind double __difftime64(__time64_t, __time64_t);
  __intrinsic __nounwind struct tm * __gmtime64(const __time64_t *);
  __intrinsic __nounwind struct tm * __localtime64(const __time64_t *);
  __intrinsic __nounwind __time64_t __mktime64(struct tm *);


__intrinsic __nounwind size_t strftime(char *, size_t, const char *,
                             const struct tm *);
                                                         



 

  #pragma inline=forced
  time_t time(time_t *p)
  {



      return __time32(p);

  }

  #pragma inline=forced
  char * ctime(const time_t *p)
  {



      return __ctime32(p);

  }

  #pragma inline=forced
  double difftime(time_t t1, time_t t2)
  {



      return __difftime32(t1, t2);

  }

  #pragma inline=forced
  struct tm * gmtime(const time_t *p)
  {



      return __gmtime32(p);

  }

  #pragma inline=forced
  struct tm * localtime(const time_t *p)
  {



      return __localtime32(p);

  }

  #pragma inline=forced
  time_t mktime(struct tm *p)
  {



      return __mktime32(p);

  }







#line 224 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\time.h"




 
#line 6 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\schema_task.h"

struct TimerDelay
{
    UINT8    weeks;
    UINT8    status;
    UINT16   timer;
    time_t   set_utc;
};


typedef void (*schema_task_cb)(void *arg);
void schema_task_init(struct TimerDelay * timer_info, schema_task_cb cb);
void schema_task_deinit(void);
void schema_task_set_delay_info(char *delay_info);
void schema_task_get_delay_info(char *delay_info);
void schema_task_set_timer_info(char *timer_info);
void schema_task_get_timer_info(char *timer_info);
#line 5 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\flash.h"

struct FlashData
{
    struct TimerDelay timers[14];
    UINT8 user_data[0];
};

struct TimerDelay *flash_export_timers(void);
void *flash_export_user_data(void);

int flash_update(void);
int flash_load(void);
int flash_reset(void);
int flash_init(int data_size);
#line 2 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\softap_flag.c"
#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\LeIotProjLib\\..\\adapter\\adapter.h"




#line 1 "C:\\Program Files (x86)\\IAR Systems\\Embedded Workbench 7.0\\arm\\inc\\c\\stdbool.h"
 
 

 





  #pragma system_include


















 
#line 6 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\LeIotProjLib\\..\\adapter\\adapter.h"
struct DeviceConfData {
    int enableflag;
    int bulb_colortemp;
    int bulb_birghtness;
};

typedef void ETSTimerFunc(void *timer_arg);






typedef unsigned char           uint8;
typedef char                    int8;

typedef unsigned short int      uint16;
typedef short int               int16;

typedef unsigned int            uint32;
typedef int                     int32;

typedef unsigned long long      uint64;
typedef long long               int64;

void IOTDM_Init();
void IOTDM_Enable_AP_Status();
void IOTDM_Disable_AP_Status();

#line 3 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\softap_flag.c"
#line 1 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\softap_flag.h"





_Bool softap_flag(void);

typedef void os_timer_func_t(void *timer_arg);
typedef struct _os_timer_t {
    struct _os_timer_t *timer_next;
    void               *timer_handle;
    uint32             timer_expire;
    uint32             timer_period;
    os_timer_func_t    *timer_func;
    _Bool               timer_repeat_flag;
    void               *timer_arg;
} os_timer_t;

#line 4 "Z:\\Documents\\Lenovo\\litsoft_git\\RTK8710_REPO\\adapter_lib\\softap_flag.c"





static struct DeviceConfData *g_data = 0;


os_timer_t reset_timer;

void _reset_flag_task()
{
    g_data->enableflag = 0;

    flash_update();
}

_Bool softap_flag(void)
{
    _Bool res = 0;

    g_data = (struct DeviceConfData *) flash_export_user_data();
    if (g_data == 0) {
        return 0;
    }

    os_timer_disarm( &reset_timer);
    os_timer_setfn( &reset_timer, _reset_flag_task, 0 );
    os_timer_arm( &reset_timer, 5*1000, 0 );

    g_data->enableflag++;
    if (g_data->enableflag == 5) {
        g_data->enableflag = 0;
        res = 1;
    } else if (g_data->enableflag < 0 || g_data->enableflag > 5) {
        g_data->enableflag = 1;
    }

    flash_update();

    return res;
}
